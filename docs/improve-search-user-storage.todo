Task: Improve search and user storage

Goals:
- Improve search accuracy and relevancy
- Fix bugs related to user storage and retrieval
- Add tests and documentation

High-level tasks:
1. Analyze current search implementation (who uses topK, filters, embedding pipeline)
2. Find and fix issues in user storage (consistency, persistence, retrieval by id)
3. Add unit tests and integration tests for search and storage layers
4. Optimize search queries and embeddings for speed

Notes:
- Use existing `database/embedding-factory.ts` and `services/*` as reference
- Ensure backwards compat with `_user` or previous schema fields
- Next step: create a plan and start with analytic PRs on `parser/person-extractor.ts` and `database` code

Date: 2025-12-02
Author: Auto note for `feature/improve-search-user-storage` branch
