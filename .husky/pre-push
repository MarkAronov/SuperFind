#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running comprehensive pre-push checks..."
echo ""

# 1. Linting & Formatting (catches code style issues)
echo "â†’ [1/5] Linting code..."
bun run check:backend || exit 1
bun run check:frontend || exit 1
echo "âœ“ Linting passed"
echo ""

# 2. Type Checking (catches type errors)
echo "â†’ [2/5] Type checking..."
bun run typecheck:backend || exit 1
bun run typecheck:frontend || exit 1
echo "âœ“ Type checking passed"
echo ""

# 3. Running Tests (catches logic bugs & runtime errors)
echo "â†’ [3/5] Running tests..."
bun run test || exit 1
echo "âœ“ Tests passed"
echo ""

# 4. Building SDK (catches build failures)
echo "â†’ [4/5] Building SDK..."
bun run build:sdk || exit 1
echo "âœ“ SDK build passed"
echo ""

# 5. Building Frontend (catches build failures)
echo "â†’ [5/5] Building frontend..."
bun run build:frontend || exit 1
echo "âœ“ Frontend build passed"
echo ""

echo "âœ… All pre-push checks passed! Safe to push."
